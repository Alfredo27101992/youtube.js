<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nuevos Tipos de Datos en JavaScript</title>
  </head>

  <body>
    <h1>Nuevos Tipos de Datos en JavaScript</h1>

    <script>
      /*------ Curso JavaScript: 49. Symbols
      let id = Symbol("id");
      let id2 = Symbol("id");

      console.log(id === id2);
      console.log(id,id2);
      console.log(typeof id, typeof id2);

      const NOMBRE = Symbol("nombre");
      const SALUDAR = Symbol("saludar");
      
      const persona={
        [NOMBRE]: "Alfred",
        edad: 35
      }

      console.log(persona);

      persona.NOMBRE = "Alfredo";
      console.log(persona);
      console.log(persona.NOMBRE);
      console.log(persona[NOMBRE]);
      
      persona[SALUDAR] = function lala() {
        console.log("Hola");
      }

      console.log(persona);
      persona[SALUDAR]();

      //recorrer objeto, no apareceran los tipo Symbol()
      for (let propiedad in persona) {
        console.log(propiedad);
        console.log(persona[propiedad]);
      }

      //nos da los tipo Symbol() ocultos
      console.log(Object.getOwnPropertySymbols(persona));*/
      
      /*------ Curso JavaScript: 50. Sets
      const set = new Set([1,2,2,3,4,5,5,true,true,false,{},{},"HoLa","hola"]);
      console.log(set);
      console.log(set.size);

      const set2 = new Set();
      set2.add(2);
      set2.add(3);
      set2.add(4);
      set2.add(4);
      set2.add(6);
      set2.add(6);
      set2.add(false);
      set2.add(true);
      set2.add(true);
      set2.add(true);
      set2.add({});
      set2.add({});
      set2.add([]);
      set2.add([]);
      set2.add("lol");
      set2.add("LoL");

      console.log(set2);
      console.log(set2.size);

      console.log("Recorriendo set");
      for (item of set) {
        console.log(item);
      }

      console.log("Recorriendo set2");
      set2.forEach(item =>{console.log(item)});
      
      let arr = Array.from(set);
      console.log(arr);
      console.log(`Imprimiendo set convertido a Array posicion[${0}]: ${arr[0]}`);
      console.log(`Imprimiendo set convertido a Array posicion[${9}]: ${arr[9]}`);

      set.delete("HoLa");
      console.log(set);

      //metodo has comprueba si valor existe dentro de la coleccion
      console.log(set.has("hola"));
      console.log(set.has(19));

      set2.clear();
      console.log(set2);
      */

      /*------ Curso JavaScript: 51. Maps

      const mapa = new Map();
      mapa.set("nombre","Alfred");
      mapa.set("apellido","Acosta");
      mapa.set("edad",31);

      console.log(mapa);
      console.log(mapa.size);
      console.log(mapa.has("correo"));
      console.log(mapa.has("nombre"));
      console.log(mapa.get("nombre"));
      mapa.set("nombre","Alfredo");
      console.log(mapa.get("nombre"));
      mapa.delete("apellido");

      mapa.set(19,"19");
      mapa.set(false,false);
      mapa.set({},{}); 
      console.log(mapa);

      //iterar Map
      for (let [key,value] of mapa) {
      console.log(`Llave: ${key}, Value: ${value}`);   
      }

      const mapa2 = new Map([
        ["nombre","Carlos"],
        ["edad", 7],
        ["animal","perro"],
        [null,"nulo"]
      ]);

      console.log(mapa2);

      const llavesMapa2 = [...mapa2.keys()];
      const valoresMapa2 = [...mapa2.values()];

      console.log(llavesMapa2);
      console.log(valoresMapa2);*/

      /*------ Curso JavaScript: 52. WeakSets & WeakMaps
      //No se acepta,causa error, se debe llamar metodo add
      //const ws = new WeakSet([1,2,3,3,4,5,true,false,false,{},{},"hola","HOla"]);
      const ws = new WeakSet();

      let valor1 = {"valor1": 1};
      let valor2 = {"valor2": 2};
      let valor3 = {"valor3": 3};
      ws.add(valor1);
      ws.add(valor2);
      //ws.add(valor3);

      console.log(ws);
      console.log(ws.has(valor1));
      console.log(ws.has(valor3));
      ws.delete(valor2);
      console.log(ws);

      ws.add(valor2);
      ws.add(valor3);
      console.log(ws);

      setInterval(() => console.log(ws),1000) 

      setTimeout(() => {
        valor1= null;
        valor2= null;
        valor3= null;
      }, 5000);

      //No se acepta,causa error, se debe llamar metodo set
      //const wm = new WeakMap([["nombre","Carlos"],["edad", 7],["animal","perro"],[null,"nulo"]]); 
      
      const wm = new WeakMap();
      let llave1 = {};
      let llave2 = {};
      let llave3 = {};

      wm.set(llave1,1);
      wm.set(llave2,2);
      console.log(wm);

      console.log(wm.has(llave1));
      console.log(wm.has(llave3));

      console.log(wm.get(llave1));
      console.log(wm.get(llave2));
      console.log(wm.get(llave3));

      wm.delete(llave2);
      console.log(wm);

      wm.set(llave2,2);
      wm.set(llave3,3);
      console.log(wm);

      setInterval(() => console.log(wm),1000)

      setTimeout(() => {
        llave1= null;
        llave2= null;
        llave3= null;
      }, 5000);*/

      /*------ Curso JavaScript: 53. Iterables  & Iterators
      //const iterable = [1,2,3,3,3,4,5,6,6,7];
      //const iterable = new Set([1,2,3,3,3,4,5,6,6]);
      //const iterable = "Hola Buenos Dias";
      const iterable = new Map([["nombre","Alfred"],
      ["edad",35]]);

      //Accedemos al iterador del iterable
      const iterador = iterable[Symbol.iterator]();

      console.log(iterable);
      console.log(iterador);
      //console.log(iterador.next());
      //console.log(iterador.next());
      //console.log(iterador.next());
      //console.log(iterador.next());
      //console.log(iterador.next());
      //console.log(iterador.next());
      
      let next = iterador.next();

      while(!next.done){
        console.log(next.value);
        next = iterador.next();
      }*/

      /*------ Curso JavaScript: 54. Generators

      function* iterable() {
        yield "Hola";
        console.log("Hola Consola");
        yield "Hola 2";
        console.log("Seguimos con mas instrucciones de nuestro codigo");
        yield "Hola 3";
        yield "Hola 4";
      }

      let iterador = iterable();
      //console.log(iterador.next());
      //console.log(iterador.next());
      //console.log(iterador.next());
      //console.log(iterador.next());
      //console.log(iterador.next());

      for (let y of iterador) {
        console.log(y);
      }

      const arr = [...iterable()];
      console.log(arr);

      function cuadrado(valor){
        setTimeout(() => {
          return console.log({valor, resultado: valor * valor});
        }, Math.random() * 1000);
      }

      function* generador(){
        console.log("Inicia Generador");
        yield cuadrado(0);
        yield cuadrado(1);
        yield cuadrado(2);
        yield cuadrado(3);
        yield cuadrado(4);
        yield cuadrado(5);
        console.log("Termina Generador");
      }

      let gen = generador();

      for (let y of gen) {
        console.log(y);
      }*/

      /*------ Curso JavaScript: 55. Proxies

      const persona = {
        nombre: "",
        apellido: "",
        edad: 0
      }

      const manejador = {
        set(obj, propiedad, valor){
          if(Object.keys(obj).indexOf(propiedad) === -1){
            return console.error(`La propiedad ${propiedad} no existe en el objeto persona`);
          }
          if((propiedad === "nombre" || propiedad === "apellido") && !(/^[A-Za-zÑñÁáÉéÍíÓóÚúÜü\s]+$/g.test(valor))){
            return console.error(`La propiedad ${propiedad} solo acepta letras y espacios en blanco`);
          }
          obj[propiedad] = valor;
        }
      }

      const alfred = new Proxy(persona,manejador);
      alfred.nombre = "Alfred";
      alfred.apellido = "Acosta";
      alfred.edad = 31;
      alfred.correo = "alfredojoseacostareyes@gmail.com";
      console.log(alfred);

      console.log(persona);*/

      /*------ Curso JavaScript: 56. Propiedades Dinámicas de los Objetos

      const objUsuarios= {
        [`id_${Math.round(Math.random() * 100 + 12)}`] : "Valor Aleatorio"
      };
      console.log(objUsuarios);
      
      const usuarios = ["Alfred", "Carl", "Irma", "Miguel", "Keyla", "Veronica", "Martha", "Johan", "Severus", "Eloisa", "Jhon", "Joel"];

      usuarios.forEach((usuario,index) => objUsuarios[`id_${index}`] = usuario);
      console.log(objUsuarios);*/


    </script>
  </body>
</html>
